# librerias ----
library(tidyverse)
# datos ----
# leemos los datos delimitados | y los guardamos en un data.frame
datos <- read.delim("D:/ITAM/MCD/Metodos de Gran Escala/arquitectura_proyectoparcial/data/final/combined_with_names.csv", sep = "|")
View(datos)
write.csv(datos, "D:/ITAM/MCD/Metodos de Gran Escala/arquitectura_proyectoparcial/data/final/combined_with_names.csv", row.names = FALSE, delim="|")
write_delim(datos, "D:/ITAM/MCD/Metodos de Gran Escala/arquitectura_proyectoparcial/data/final/combined_with_names.csv", row.names = FALSE, delim="|")
?write_delim
)
write_delim(datos, "D:/ITAM/MCD/Metodos de Gran Escala/arquitectura_proyectoparcial/data/final/combined_with_names_fixed.csv", delim="|", col_names = F
)
View(datos)
write_delim(datos, "D:/ITAM/MCD/Metodos de Gran Escala/arquitectura_proyectoparcial/data/final/combined_with_names_fixed.txt",
delim="|", col_names = T)
write_delim(datos, "D:/ITAM/MCD/Metodos de Gran Escala/arquitectura_proyectoparcial/data/final/combined_with_names_fixed.csv",
delim="|", col_names = T)
View(datos)
# librerias ----
library(tidyverse)
# datos ----
# para cada archivo de la carpeta ../data/processed/
# se lee el archivo, se quitan se quitan las comas de las columnas excepto de la columna 11
# se guarda el archivo en la carpeta ../data/fixed/ sin las comas
# usando la funcion write delim usando como delim |
list.files("../data/processed/") %>%
map(~read_delim(paste0("../data/processed/", .x), delim = ",", col_types = cols(.default = col_character())) %>%
mutate_at(vars(-11), ~str_remove_all(., ",")) %>%
write_delim(paste0("../data/fixed/", .x), delim = "|"))
# datos ----
# para cada archivo de la carpeta ../data/processed/
# se lee el archivo, se quitan se quitan las comas de las columnas excepto de la columna 11
# se guarda el archivo en la carpeta ../data/fixed/ sin las comas
# usando la funcion write delim usando como delim |
# los datos no tienen nombres de columnas
# se guardan los archivos sin colnames, es decir, colnames=FALSE
list.files("../data/processed/") %>%
map(~read_delim(paste0("../data/processed/", .x), delim=",", col_names=FALSE) %>%
select(-11) %>%
write_delim(paste0("../data/fixed/", .x), delim="|", col_names=FALSE))
# librerias ----
library(tidyverse)
# datos ----
# para cada archivo de la carpeta ../data/processed/
# se lee el archivo, se quitan se quitan las comas de las columnas excepto de la columna 11
# se guarda el archivo en la carpeta ../data/fixed/ sin las comas
# usando la funcion write delim usando como delim |
# los datos no tienen nombres de columnas
# se guardan los archivos sin colnames, es decir, colnames=FALSE
list.files("../data/processed/") %>%
map(~read_delim(paste0("../data/processed/", .x), delim=",", col_names=FALSE) %>%
select(-11) %>%
write_delim(paste0("../data/fixed/", .x), delim="|", col_names=FALSE))
# datos ----
# para cada archivo de la carpeta ../data/processed/
# se lee el archivo, se quitan se quitan las comas de las columnas excepto de la columna 11
# se guarda el archivo en la carpeta ../data/fixed/ sin las comas
# usando la funcion write delim usando como delim |
# los datos no tienen nombres de columnas
# se guardan los archivos sin colnames, es decir, colnames=FALSE
list.files("../data/processed/") %>%
map(~read_delim(paste0("../data/processed/", .x), delim=",", col_names=FALSE) %>%
write_delim(paste0("../data/fixed/", .x), delim="|", col_names=FALSE))
# una vez hecho eso, leemos uno por uno los archivos de la carpeta ../data/fixed/
# y los vamos pegando en un data frame aquí para hacer un archivo único
# con todos los datos que guardaremos en ..data/fixed_complete/ con el nombre "fixed_fill_data.csv" con
# la funcion de write delim usando como delim |, definimos el vector:
# c("producto,presentacion,marca,categoria,catalogo,precio,fecharegistro,cadenacomercial,giro,nombrecomercial,direccion,estado,municipio,latitud,longitud")
# como los nombres de las columnas
# y guardamos el archivo con colnames=TRUE
data <- list.files("../data/fixed/") %>%
map(~read_delim(paste0("../data/fixed/", .x), delim="|", col_names=FALSE)) %>%
bind_rows() %>%
write_delim("../data/fixed_complete/fixed_fill_data.csv", delim="|", col_names=c("producto,presentacion,marca,categoria,catalogo,precio,fecharegistro,cadenacomercial,giro,nombrecomercial,direccion,estado,municipio,latitud,longitud"))
# una vez hecho eso, leemos uno por uno los archivos de la carpeta ../data/fixed/
# y los vamos pegando en un data frame aquí para hacer un archivo único
# con todos los datos que guardaremos en ..data/fixed_complete/ con el nombre "fixed_fill_data.csv" con
# la funcion de write delim usando como delim |, definimos el vector:
# c("producto,presentacion,marca,categoria,catalogo,precio,fecharegistro,cadenacomercial,giro,nombrecomercial,direccion,estado,municipio,latitud,longitud")
# como los nombres de las columnas
# y guardamos el archivo con colnames=TRUE
data <- list.files("../data/fixed/") %>%
map(~read_delim(paste0("../data/fixed/", .x), delim="|", col_names=FALSE)) %>%
bind_rows() # %>%
data
# una vez hecho eso, leemos uno por uno los archivos de la carpeta ../data/fixed/
# y los vamos pegando en un data frame aquí para hacer un archivo único
# con todos los datos que guardaremos en ..data/fixed_complete/ con el nombre "fixed_fill_data.csv" con
# la funcion de write delim usando como delim |, definimos el vector:
# c("producto,presentacion,marca,categoria,catalogo,precio,fecharegistro,cadenacomercial,giro,nombrecomercial,direccion,estado,municipio,latitud,longitud")
# como los nombres de las columnas
# y guardamos el archivo con colnames=TRUE
datos <- list.files("../data/fixed/") %>%
map(~read_delim(paste0("../data/fixed/", .x), delim="|", col_names=FALSE)) %>%
bind_rows() # %>%
# una vez hecho eso, leemos uno por uno los archivos de la carpeta ../data/fixed/
# y los vamos pegando en un data frame aquí para hacer un archivo único
# con todos los datos que guardaremos en ..data/fixed_complete/ con el nombre "fixed_fill_data.csv" con
# la funcion de write delim usando como delim |, definimos el vector:
# c("producto,presentacion,marca,categoria,catalogo,precio,fecharegistro,cadenacomercial,giro,nombrecomercial,direccion,estado,municipio,latitud,longitud")
# como los nombres de las columnas
# y guardamos el archivo con colnames=TRUE
datos <- read_delim("../data/fixed_complete/", delim="|", col_names=FALSE)
# librerias ----
library(tidyverse)
# una vez hecho eso, leemos uno por uno los archivos de la carpeta ../data/fixed/
# y los vamos pegando en un data frame aquí para hacer un archivo único
# con todos los datos que guardaremos en ..data/fixed_complete/ con el nombre "fixed_fill_data.csv" con
# la funcion de write delim usando como delim |, definimos el vector:
# c("producto,presentacion,marca,categoria,catalogo,precio,fecharegistro,cadenacomercial,giro,nombrecomercial,direccion,estado,municipio,latitud,longitud")
# como los nombres de las columnas
# y guardamos el archivo con colnames=TRUE
datos <- read_delim("../data/fixed_complete/", delim="|", col_names=FALSE)
# una vez hecho eso, leemos uno por uno los archivos de la carpeta ../data/fixed/
# y los vamos pegando en un data frame aquí para hacer un archivo único
# con todos los datos que guardaremos en ..data/fixed_complete/ con el nombre "fixed_fill_data.csv" con
# la funcion de write delim usando como delim |, definimos el vector:
# c("producto,presentacion,marca,categoria,catalogo,precio,fecharegistro,cadenacomercial,giro,nombrecomercial,direccion,estado,municipio,latitud,longitud")
# como los nombres de las columnas
# y guardamos el archivo con colnames=TRUE
datos <- read_delim("../data/fixed_complete/combined_with_names.csv", delim="|")
distinct(datos$estado)
unique(datos$estado)
colnames(datos)
datos %>% group_by(anio=year(fecharegistro), catalogo) %>% n()
datos %>% group_by(anio=year(fecharegistro), catalogo) %>% count()
datos %>%
group_by(Year=year(fecharegistro)) %>%
summarise(UniqueCatalogo = n_distinct(catalogo))
